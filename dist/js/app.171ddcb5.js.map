{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./static/room.png","webpack:///./src/App.vue?faca","webpack:///./src/components/Room.vue?5e70","webpack:///./src/components/Person.vue?7790","webpack:///./src/utils.js","webpack:///src/components/Person.vue","webpack:///./src/components/Person.vue?d46d","webpack:///./src/components/Person.vue?5fa9","webpack:///src/components/Room.vue","webpack:///./src/components/Room.vue?e7f2","webpack:///./src/components/Room.vue","webpack:///./src/components/Connect.vue?4db8","webpack:///src/components/Connect.vue","webpack:///./src/components/Connect.vue?e186","webpack:///./src/components/Connect.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/store/getters.js","webpack:///./src/store/actions.js","webpack:///./src/store/mutations.js","webpack:///./src/store/actions-webrtc.js","webpack:///./src/store/index.js","webpack:///./src/registerServiceWorker.js","webpack:///./src/main.js","webpack:///./src/components/Person.vue?a9b8"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","isConnected","_e","staticRenderFns","viewBoxString","staticStyle","_l","peer","getSelf","_v","_s","JSON","stringify","class","self","isself","staticClass","metadata","x","y","undefined","pointer","angle","Math","PI","distance","on","startDragPointer","startDrag","color","facePosition","createPerson","out","assign","tracks","video","audio","console","log","p1","p2","dy","dx","theta","atan2","sqrt","component","$event","preventDefault","connect","directives","rawName","expression","domProps","target","composing","groupID","state","getPeers","peers","connected","audioContext","recieveMessage","dispatch","message","peer_id","type","sendMessage","send","initPeer","updateName","commit","recieveName","updatePosition","point","recievePosition","updateDirection","recieveDirection","updatePointer","recievePointer","updateColor","recieveColor","updateAudioTrack","track","Vue","set","updateVideoTrack","setGroupID","addPeer","id","person","removePeer","connection","close","delete","addTrackToPeer","kind","setName","setPosition","setDirection","setPointer","setColor","SIGNALING_SERVER","ICE_SERVERS","url","signaling_socket","requestAudioTrack","navigator","mediaDevices","getUserMedia","then","stream","getAudioTracks","peerID","addTrack","requestVideoTrack","getVideoTracks","connectGroup","context","options","io","onConnectGroup","onAddPeer","onRemovePeer","onIceCandidate","onSessionDescription","emit","config","ice_candidate","addIceCandidate","RTCIceCandidate","disconnectGroup","peer_connection","RTCPeerConnection","dataChannel","createDataChannel","peerData","onicecandidate","event","candidate","sdpMLineIndex","ontrack","label","ondatachannel","channel","onopen","onmessage","parse","should_create_offer","createOffer","local_description","setLocalDescription","Alert","error","sessionDescription","remote_description","session_description","desc","RTCSessionDescription","setRemoteDescription","createAnswer","use","Vuex","AudioContext","randomColor","Store","getters","actions","actionsWebRTC","mutations","register","process","ready","cached","updated","offline","store","render","h","App","$mount"],"mappings":"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","file":"js/app.171ddcb5.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = __webpack_public_path__ + \"img/room.88e2a938.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[(!_vm.isConnected)?_c('Connect'):_vm._e(),(_vm.isConnected)?_c('Room'):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('svg',{attrs:{\"id\":\"room\",\"viewBox\":_vm.viewBoxString}},[_c('image',{staticStyle:{\"opacity\":\"0.5\"},attrs:{\"href\":require(\"@/../static/room.png\"),\"width\":\"800\",\"x\":\"-400\",\"y\":\"-250\"}}),_vm._l((_vm.getPeers),function(peer){return _c('Person',{attrs:{\"metadata\":peer}})}),_c('Person',{attrs:{\"metadata\":_vm.getSelf,\"isself\":true}})],2),_c('div',{staticStyle:{\"position\":\"absolute\",\"top\":\"0\",\"left\":\"0\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(JSON.stringify(_vm.getSelf))+\"\\n\\t\\t\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{class:{ self: _vm.isself }},[_c('text',{staticClass:\"name\",attrs:{\"text-anchor\":\"middle\",\"x\":_vm.metadata.x,\"y\":_vm.metadata.y+34}},[_vm._v(_vm._s(_vm.metadata.name))]),(_vm.pointer != undefined)?_c('g',{staticClass:\"pointer\",attrs:{\"transform\":(\"translate(\" + (_vm.metadata.x) + \", \" + (_vm.metadata.y) + \")\")}},[_c('g',{attrs:{\"transform\":(\"rotate(\" + (_vm.pointer.angle*180/Math.PI+90) + \")\")}},[(_vm.metadata.pointer != undefined)?_c('path',{attrs:{\"d\":(\"M0 0 l0 \" + (-_vm.pointer.distance)),\"stroke\":\"#000000\",\"stroke-width\":\"3\",\"stroke-dasharray\":\"7 7\"}}):_vm._e(),_c('g',{attrs:{\"transform\":(\"translate(-10, \" + (-_vm.pointer.distance) + \")\")}},[_c('svg',{attrs:{\"width\":\"20\",\"height\":\"20\",\"viewBox\":\"0 0 70 74\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"},on:{\"mousedown\":_vm.startDragPointer}},[_c('path',{attrs:{\"d\":\"M28.6695 4.41465L1.41385 62.1706C-1.39872 68.1306 5.0533 74.7979 11.3108 72.7302C18.9427 70.2082 27.7074 68 35 68C42.2926 68 51.0573 70.2082 58.6892 72.7302C64.9467 74.7979 71.3987 68.1306 68.5861 62.1706L41.3305 4.41464C38.8057 -0.935455 31.1943 -0.935448 28.6695 4.41465Z\",\"fill\":\"black\"}})])])])]):_vm._e(),_c('g',{staticClass:\"player\",on:{\"mousedown\":_vm.startDrag}},[_c('circle',{attrs:{\"cx\":_vm.metadata.x,\"cy\":_vm.metadata.y,\"r\":\"20\",\"fill\":_vm.metadata.color,\"stroke\":\"#000000\",\"stroke-width\":\"3\"}}),_c('g',{staticClass:\"face\"},[_c('circle',{attrs:{\"cx\":_vm.facePosition.x-4,\"cy\":_vm.facePosition.y-2,\"r\":\"2\",\"fill\":\"#000000\"}}),_c('circle',{attrs:{\"cx\":_vm.facePosition.x+4,\"cy\":_vm.facePosition.y-2,\"r\":\"2\",\"fill\":\"#000000\"}}),_c('path',{attrs:{\"d\":(\"M \" + (_vm.facePosition.x-4) + \" \" + (_vm.facePosition.y+4) + \" l 8 0\"),\"stroke\":\"#000000\",\"stroke-width\":\"2\"}})])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nexport const createPerson = (data) => {\n    let out =  Object.assign({\n        name: '',\n        color: '#CCCCCC',\n        tracks: {\n            video: null,\n            audio: null,\n        },\n        angle: 0,\n        pointer: null,\n        x: 0,\n        y: 0,\n    }, data);\n    console.log('PERSON', out, data);\n    return out\n}\n\nexport const angle = (p1, p2) => {\n    var dy = p2.y - p1.y;\n    var dx = p2.x - p1.x;\n    var theta = Math.atan2(dy, dx); // range (-PI, PI]\n    //theta *= 180 / Math.PI; // rads to degs, range (-180, 180]\n    //if (theta < 0) theta = 360 + theta; // range [0, 360)\n    return theta;\n}\n\nexport const distance = (p1, p2) => {\n    return Math.sqrt((p1.x-p2.x)*(p1.x-p2.x) + (p1.y-p2.y)*(p1.y-p2.y));\n}","<template>\n    <g :class=\"{ self: isself }\">\n        <text class=\"name\" text-anchor=\"middle\" :x=\"metadata.x\" :y=\"metadata.y+34\">{{ metadata.name }}</text>\n\n        <g class=\"pointer\" v-if=\"pointer != undefined\" :transform=\"`translate(${metadata.x}, ${metadata.y})`\">\n            <g :transform=\"`rotate(${pointer.angle*180/Math.PI+90})`\">\n                <path v-if=\"metadata.pointer != undefined\" :d=\"`M0 0 l0 ${-pointer.distance}`\" stroke=\"#000000\" stroke-width=\"3\" stroke-dasharray=\"7 7\"></path>\n                <g :transform=\"`translate(-10, ${-pointer.distance})`\">\n                    <svg @mousedown=\"startDragPointer\" width=\"20\" height=\"20\" viewBox=\"0 0 70 74\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path d=\"M28.6695 4.41465L1.41385 62.1706C-1.39872 68.1306 5.0533 74.7979 11.3108 72.7302C18.9427 70.2082 27.7074 68 35 68C42.2926 68 51.0573 70.2082 58.6892 72.7302C64.9467 74.7979 71.3987 68.1306 68.5861 62.1706L41.3305 4.41464C38.8057 -0.935455 31.1943 -0.935448 28.6695 4.41465Z\" fill=\"black\"/>\n                    </svg>\n                </g>\n            </g>\n        </g>\n\n        <g class=\"player\" @mousedown=\"startDrag\">\n            <circle  :cx=\"metadata.x\" :cy=\"metadata.y\" r=\"20\" :fill=\"metadata.color\" stroke=\"#000000\" stroke-width=\"3\"></circle>\n            <!--<circle :cx=\"facePosition.x\" :cy=\"facePosition.y\" r=\"10\" fill=\"rgba(0,0,0,0.3)\"></circle>-->\n            \n            <g class=\"face\">\n                <circle :cx=\"facePosition.x-4\" :cy=\"facePosition.y-2\" r=\"2\" fill=\"#000000\"></circle>\n                <circle :cx=\"facePosition.x+4\" :cy=\"facePosition.y-2\" r=\"2\" fill=\"#000000\"></circle>\n                <path :d=\"`M ${facePosition.x-4} ${facePosition.y+4} l 8 0`\" stroke=\"#000000\" stroke-width=\"2\"></path>\n            </g>\n        </g>\n    </g> \n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport { angle, distance } from \"@/utils\";\n\nexport default {\n\tname: \"Person\",\n    props: ['metadata', 'isself'],\n    data() {\n        return { dragging: false, localPointer: null, draggingPointer: false };\n    },\n    computed: {\n        pointer() {\n            return this.metadata.pointer || this.localPointer;\n        },\n        facePosition() {\n            return {\n                x: this.metadata.x + Math.cos(this.metadata.angle) * 10,\n                y: this.metadata.y + Math.sin(this.metadata.angle) * 10\n            }\n        },\n\t\t...mapGetters(['audioContext'])\n    },\n    mounted() {\n        if(this.isself) {\n            window.addEventListener('mousemove', this.mouseMove);\n        }\n    },\n    watch: {\n        \"metadata.tracks.audio\": {\n            // the callback will be called immediately after the start of the observation\n            immediate: true, \n            handler (track, oldVal) {\n                //console.log(val);\n                if(track != undefined && track.constructor == MediaStreamTrack) {\n                    this.connectAudioSource(track);\n                }\n            }\n        },\n    },\n    methods: {\n        connectAudioSource(track) {\n            if(!this.isself) {\n                //TODO: Spatialize the audio\n                let stream = new MediaStream();\n                stream.addTrack(track);\n\n                var source = this.audioContext.createMediaStreamSource(stream);\n\n                source.connect(this.audioContext.destination);\n            }\n        },\n        mouseMove(e) {\n            let svg = document.querySelector('#room');\n\n            let leftMouseButtonOnlyDown = e.buttons === undefined \n                    ? e.which === 1 \n                    : e.buttons === 1;\n            \n            var pt = svg.createSVGPoint();\n\t\t\tpt.x = e.clientX;\n            pt.y = e.clientY;\n            \n            var cursorpt =  pt.matrixTransform(svg.getScreenCTM().inverse());\n\n            let lookingAngle = angle(this.metadata, cursorpt);\n            if(this.angle != Math.round(lookingAngle*10)/10) {\n                this.$store.dispatch('updateDirection', Math.round(lookingAngle*10)/10);\n            }\n\n            let dist = distance(this.metadata, cursorpt);\n            if(dist < 140 && dist > 21) {\n                this.localPointer = {\n                    //x: this.metadata.x + Math.cos(lookingAngle) * 30,\n                    //y: this.metadata.y + Math.sin(lookingAngle) * 30,\n                    distance: 43,\n                    angle: lookingAngle\n                }\n            } else {\n                this.localPointer = null;\n            }\n            \n            // drag player\n            if(leftMouseButtonOnlyDown && this.dragging) {\n                this.$store.dispatch('updatePosition', {\n                    x: cursorpt.x,\n                    y: cursorpt.y\n                });\n            } else {\n                this.dragging = false;\n            }\n\n            // drag pointer\n            if(leftMouseButtonOnlyDown && this.draggingPointer) {\n                this.$store.dispatch('updatePointer', {\n                    distance: dist,\n                    angle: lookingAngle\n                });\n            } else if(this.draggingPointer) {\n                this.draggingPointer = false;\n\n                this.$store.dispatch('updatePointer', null);\n            }\n        },\n        startDrag() {\n            if(this.isself) {\n                this.dragging = true;\n            }\n        },\n        startDragPointer() {\n            if(this.isself) {\n                this.draggingPointer = true;\n            }\n        }\n    }\n};\n</script>\n\n<style>\n    .self .player { cursor: move }\n    .self .pointer { cursor: move }\n\n    .name {\n        font: 12px sans-serif;\n        user-select:none;\n        text-align: center;\n    }\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Person.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Person.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Person.vue?vue&type=template&id=da01ef56&\"\nimport script from \"./Person.vue?vue&type=script&lang=js&\"\nexport * from \"./Person.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Person.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div>\n\t\t<svg id=\"room\" :viewBox=\"viewBoxString\">\n            <image href=\"@/../static/room.png\" width=\"800\" x=\"-400\" y=\"-250\" style=\"opacity: 0.5\"></image>\n            <Person v-for=\"peer in getPeers\" :metadata=\"peer\" />\n\n\t\t\t<Person :metadata=\"getSelf\" :isself=\"true\" />\n\t\t</svg>\n\t\t<div style=\"position:absolute; top:0;left:0;\">\n\t\t\t<!-- debug -->\n\t\t\t{{ JSON.stringify(getSelf) }}\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport Person from \"@/components/Person\";\nimport { mapGetters } from \"vuex\";\n\nexport default {\n\tname: \"Room\",\n\tcomputed: {\n\t\tviewBoxString () {\n\t\t\t// center svg on [0, 0]\n\t\t\treturn `${-this.width/2} ${-this.height/2} ${this.width} ${this.height}`\n\t\t},\n\t\t...mapGetters([\"getSelf\", \"getPeers\"])\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t}\n\t},\n\tmounted() {\n\t\twindow.addEventListener('resize', this.getWindowSize);\n\t\t//window.addEventListener('mousedown', this.movePlayer);\n\n\t\tthis.getWindowSize();\n\t},\n\tmethods: {\n\t\tgetWindowSize() {\n\t\t\tthis.width = document.documentElement.clientWidth;\n\t\t\tthis.height = document.documentElement.clientHeight;\n\t\t},\n\t\t/*movePlayer(evt) {\n\t\t\tlet svg = document.querySelector('#room');\n\n\t\t\tvar pt = svg.createSVGPoint();\n\t\t\tpt.x = evt.clientX;\n\t\t\tpt.y = evt.clientY;\n\t\n\t\t\tvar cursorpt =  pt.matrixTransform(svg.getScreenCTM().inverse());\n\n\t\t\tthis.$store.dispatch('updatePosition', {\n\t\t\t\tx: cursorpt.x,\n\t\t\t\ty: cursorpt.y\n\t\t\t});\n\t\t}*/\n\t},\n\tcomponents: {\n\t\tPerson\n\t}\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Room.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Room.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Room.vue?vue&type=template&id=6a626295&\"\nimport script from \"./Room.vue?vue&type=script&lang=js&\"\nexport * from \"./Room.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.connect($event)}}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.groupID),expression:\"groupID\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.groupID)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.groupID=$event.target.value}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.name),expression:\"name\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.name=$event.target.value}}}),_c('button',{attrs:{\"type\":\"submit\"}},[_vm._v(\"connect\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<form @submit.prevent=\"connect\">\n\t\t<input type=\"text\" v-model=\"groupID\" />\n\t\t<input type=\"text\" v-model=\"name\" />\n\n        <button type=\"submit\">connect</button>\n\t</form>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\n\nexport default {\n\tname: \"Room\",\n\tdata: function() {\n\t\treturn {\n\t\t\tgroupID: 'test',\n\t\t\tname: 'Talfa Ester'\n\t\t}\n\t},\n\tmethods: {\n\t\tconnect() {\n\t\t\tthis.$store.dispatch('connectGroup', {\n\t\t\t\tgroupID: this.groupID,\n\t\t\t\tname: this.name\n\t\t\t})\n\t\t}\n\t}\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Connect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Connect.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Connect.vue?vue&type=template&id=92017aca&\"\nimport script from \"./Connect.vue?vue&type=script&lang=js&\"\nexport * from \"./Connect.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div id=\"app\">\n\t\t<!-- connection screen -->\n\t\t<Connect v-if=\"!isConnected\"/>\n\n\t\t<!-- show once connected -->\n\t\t<Room v-if=\"isConnected\"/>\n\t</div>\n</template>\n\n<script>\nimport Room from \"@/components/Room\";\nimport Connect from \"@/components/Connect\";\n\nimport { mapGetters } from \"vuex\";\n\nexport default {\n\tname: \"App\",\n\tcomputed: {\n\t\t...mapGetters(['isConnected'])\n\t},\n\tcomponents: {\n\t\tRoom,\n\t\tConnect\n\t}\n};\n</script>\n\n<style></style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=58cfa4c1&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\nexport const getSelf = state => {\n\treturn state.self;\n}\n\nexport const getPeers = state => {\n\treturn state.peers;\n}\n\nexport const isConnected = state => {\n\treturn state.connected;\n}\n\nexport const audioContext = state => {\n    return state.audioContext;\n}","\n// Called WebRTC recieves a message from peer\n// Not a great idea but simply dispatches message along\nexport const recieveMessage = ({ dispatch }, { message, peer_id }) => {\n\tdispatch(message.type, { message, peer_id });\n}\n\nexport const sendMessage = ({ state }, { message, peer_id }) => {\n\tif(peer_id) {\n\t\tstate.peers[peer_id].data.send(JSON.stringify(message));\n\t} else {\n\t\tfor(let peer_id in state.peers) {\n\t\t\tstate.peers[peer_id].data.send(JSON.stringify(message));\n\t\t}\n\t}\n}\n\n\nexport const initPeer = ({ state, dispatch }, peer_id) => {\n\tdispatch('sendMessage', { message: { type: 'recieveName', name: state.self.name }, peer_id });\n\tdispatch('sendMessage', { message: { type: 'recieveColor', color: state.self.color }, peer_id });\n\tdispatch('sendMessage', { message: { type: 'recievePosition', x: state.self.x, y: state.self.y }, peer_id });\n\tdispatch('sendMessage', { message: { type: 'recieveDirection', angle: state.self.angle }, peer_id });\n}\n\n\nexport const updateName = ({ commit, dispatch }, name) => {\n\tdispatch('sendMessage', { message: { type: 'recieveName', name }});\n\n\tcommit('setName', { name });\n}\n\nexport const recieveName = ({ commit }, { message, peer_id }) => {\n\tcommit('setName', { name: message.name, peer_id });\n}\n\nexport const updatePosition = ({ commit, dispatch }, point) => {\n\tdispatch('sendMessage', { message: { type: 'recievePosition', ...point } } );\n\n\tcommit('setPosition', {point});\n}\n\nexport const recievePosition = ({ commit }, { message, peer_id }) => {\n\tcommit('setPosition', {point: message, peer_id});\n}\n\n\n\nexport const updateDirection = ({ commit, dispatch }, angle) => {\n\tdispatch('sendMessage', { message: { type: 'recieveDirection', angle }});\n\tcommit('setDirection', {angle});\n}\n\nexport const recieveDirection = ({ commit }, { message, peer_id }) => {\n\tcommit('setDirection', {angle: message.angle, peer_id});\n}\n\n\n\nexport const updatePointer = ({ commit, dispatch }, pointer) => {\n\tdispatch('sendMessage', { message: { type: 'recievePointer', pointer }});\n\tcommit('setPointer', { pointer });\n}\n\nexport const recievePointer = ({ commit }, {message, peer_id }) => {\n\tcommit('setPointer', { pointer: message.pointer, peer_id });\n}\n\n\nexport const updateColor = ({ commit, dispatch }, color) => {\n\tdispatch('sendMessage', { message: { type: 'recieveColor', color }});\n\tcommit('setColor', { color });\n}\n\nexport const recieveColor = ({ commit }, { message, peer_id }) => {\n\tcommit('setColor', { color: message.color, peer_id });\n}","import Vue from 'vue'\n\nimport { createPerson } from '../utils'\n\nexport default {\n\t// Update self audio track\n\tupdateAudioTrack(state, track) {\n\t\tVue.set(state.self.tracks, 'audio', track)\n\t},\n\n\t// Update self video track\n\tupdateVideoTrack(state, track) {\n\t\tVue.set(state.self.tracks, 'audio', track)\n\t},\n\n\t// Update or disconnect group ID\n\tsetGroupID(state, groupID) {\n\t\tif(groupID != undefined) {\n\t\t\tVue.set(state, 'groupID', groupID);\n\t\t\tVue.set(state, 'connected', true);\n\t\t} else {\n\t\t\tVue.set(state, 'groupID', '');\n\t\t\tVue.set(state, 'connected', false);\n\t\t}\n\t},\n\n\taddPeer(state, peer) {\n\t\tconsole.log('ADDPEER', peer.id, peer.data);\n\t\tlet person = createPerson(peer.data);\n\t\tconsole.log(peer.id, person);\n\t\tVue.set(state.peers, peer.id, person);\n\t},\n\n\tremovePeer(state, peer_id) {\n\t\tif (peer_id in state.peers) {\n\t\t\tstate.peers[peer_id].connection.close();\n\t\t\tVue.delete(state.peers, peer_id);\n\t\t}\n\t},\n\n\taddTrackToPeer(state, {peer_id, track}) {\n\t\tVue.set(state.peers[peer_id].tracks, track.kind, track);\n    },\n    \n    setName(state, {name, peer_id}) {\n        if(peer_id) {\n\t\t\t// update name of peer\n\t\t\tVue.set(state.peers[peer_id], 'name', name);\n\t\t} else {\n\t\t\t// update name of self\n\t\t\tVue.set(state.self, 'name', name);\n\t\t}\n    },\n\n\tsetPosition(state, {point, peer_id}) {\n\t\tif(peer_id) {\n\t\t\t// update position of peer\n\t\t\tVue.set(state.peers[peer_id], 'x', point.x);\n\t\t\tVue.set(state.peers[peer_id], 'y', point.y);\n\t\t} else {\n\t\t\t// update position of self\n\t\t\tVue.set(state.self, 'x', point.x);\n\t\t\tVue.set(state.self, 'y', point.y);\n\t\t}\n    },\n    \n    setDirection(state, {angle, peer_id}) {\n        if(peer_id) {\n            // update direction of peer\n            Vue.set(state.peers[peer_id], 'angle', angle);\n        } else {\n            // update direction of self\n            Vue.set(state.self, 'angle', angle);\n        }\n    },\n\n    setPointer(state, {pointer, peer_id}) {\n        if(peer_id) {\n            // update pointer of peer\n            Vue.set(state.peers[peer_id], 'pointer', pointer);\n        } else {\n            // update pointer of self\n            Vue.set(state.self, 'pointer', pointer);\n        }\n    },\n\n    setColor(state, {color, peer_id}) {\n        if(peer_id) {\n            // update color of peer\n            Vue.set(state.peers[peer_id], 'color', color);\n        } else {\n            // update color of self\n            Vue.set(state.self, 'color', color);\n        }\n    }\n}","import io from 'socket.io-client';\n\n/** CONFIG **/\nvar SIGNALING_SERVER = \"https://cozyroom-signaling.herokuapp.com/\";\n\nvar ICE_SERVERS = [\n\t{url:\"stun:stun.l.google.com:19302\"}\n];\n\nvar signaling_socket = null;   /* our socket.io connection to our webserver */\nvar peers = {};                /* keep track of our peer connections, indexed by peer_id (aka socket.io id) */\n\n// Request audio track and send to peers\nexport const requestAudioTrack = ({ state, commit }) => {\n\tnavigator.mediaDevices.getUserMedia({\"audio\": true, \"video\": true }).then(stream => {\n\t\tlet track = stream.getAudioTracks()[0]\n\n\t\tfor(let peerID in peers) {\n\t\t\tlet peer = peers[peerID]\n\n\t\t\tpeer.connection.addTrack(track)\n\t\t}\n\n\t\tcommit('updateAudioTrack', track)\n\t})\n}\n\n// Request video track and send to peers\nexport const requestVideoTrack = ({ state, commit }) => {\n\tnavigator.mediaDevices.getUserMedia({\"audio\": false, \"video\": true }).then(stream => {\n\t\tlet track = stream.getVideoTracks()[0]\n\n\t\tfor(let peerID in peers) {\n\t\t\tlet peer = peers[peerID]\n\n\t\t\tpeer.connection.addTrack(track)\n\t\t}\n\n\t\tcommit('updateVideoTrack', track)\n\t})\n}\n\n// Connect to group with group ID\nexport const connectGroup = (context, options) => {\n\tsignaling_socket = io(SIGNALING_SERVER);\n\n\tsignaling_socket.on('connect', onConnectGroup.bind(null, context, options));\n\tsignaling_socket.on('addPeer', onAddPeer.bind(null, context));\n\tsignaling_socket.on('removePeer', onRemovePeer.bind(null, context));\n\n\t/**\n\t* The offerer will send a number of ICE Candidate blobs to the answerer so they \n\t* can begin trying to find the best path to one another on the net.\n\t*/\n\tsignaling_socket.on('iceCandidate', onIceCandidate.bind(null, context));\n\n\t/** \n\t* Peers exchange session descriptions which contains information\n\t* about their audio / video settings and that sort of stuff. First\n\t* the 'offerer' sends a description to the 'answerer' (with type\n\t* \"offer\"), then the answerer sends one back (with type \"answer\").  \n\t*/\n\tsignaling_socket.on('sessionDescription', onSessionDescription.bind(null, context));\n\t\n}\n\nfunction onConnectGroup({ dispatch, commit }, { groupID, name }) {\n    console.log(\"Connected to signaling server\");\n    \n    dispatch('requestAudioTrack');\n\n    // this joins us to the group\n    signaling_socket.emit('join', { 'channel': groupID });\n\n    commit('setGroupID', groupID);\n    dispatch('updateName', name);\n}\n\nfunction onAddPeer({ dispatch }, config) {\n    dispatch('addPeer', config);\n}\n\nfunction onRemovePeer({ commit }, config) {\n    console.log('Signaling server said to remove peer:', config);\n    var peer_id = config.peer_id;\n\n    //peers[peer_id] = undefined\n\n    commit('removePeer', peer_id);\n}\n\nfunction onIceCandidate({ state }, config) {\n    var peer = peers[config.peer_id].connection;\n    var ice_candidate = config.ice_candidate;\n    peer.addIceCandidate(new RTCIceCandidate(ice_candidate));\n}\n\nfunction onSessionDescription({ dispatch }, config) {\n    dispatch('sessionDescription', config);\n}\n\n// Disconnect from group\nexport const disconnectGroup = ({ state, commit }, groupID) => {\n\tfor(peer_id in peers) {\n\t\tpeers[peer_id].connection.close();\n\t}\n\tsignaling_socket.emit('part', { 'channel': groupID });\n\tsignaling_socket = null;\n\n\tcommit('setGroupID', null);\n}\n\nexport const addPeer = ({ state, commit, dispatch }, config) => {\n\tconsole.log('Signaling server said to add peer:', config);\n\tvar peer_id = config.peer_id;\n\n\tif (peer_id in peers) {\n\t\t/* This could happen if the user joins multiple channels where the other peer is also in. */\n\t\tconsole.log(\"Already connected to peer \", peer_id);\n\t\treturn;\n\t}\n\n\tvar peer_connection = new RTCPeerConnection(\n\t\t{\"iceServers\": ICE_SERVERS},\n\n\t\t/* this will no longer be needed by chrome\n\t\t* eventually (supposedly), but is necessary \n\t\t* for now to get firefox to talk to chrome */\n\t\t{\"optional\": [{\"DtlsSrtpKeyAgreement\": true}]} \n\t);\n\n\t// create data channel for non-media messages\n\t// the name is required but doesn't matter\n\tlet dataChannel = peer_connection.createDataChannel('general');\n\t\n\tlet peerData = {\n\t\t'connection': peer_connection,\n\t\t'data': dataChannel\n\t};\n\tcommit('addPeer', {\n\t\tid: peer_id,\n\t\tdata: peerData\n    });\n\n\tpeers[peer_id] = peerData;\n\n\tpeer_connection.onicecandidate = function(event) {\n\t\tif (event.candidate) {\n\t\t\tsignaling_socket.emit('relayICECandidate', {\n\t\t\t\t'peer_id': peer_id, \n\t\t\t\t'ice_candidate': {\n\t\t\t\t\t'sdpMLineIndex': event.candidate.sdpMLineIndex,\n\t\t\t\t\t'candidate': event.candidate.candidate\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tpeer_connection.ontrack = function(event) {\n\t\tconsole.log(`Adding ${event.track.kind} track with label ${event.track.label}`);\n\n\t\tcommit('addTrackToPeer', {\n\t\t\tpeer_id: peer_id,\n\t\t\ttrack: event.track,\n\t\t});\n\t}\n\t\n\t/*peer_connection.onaddstream = function(event) {\n\t\tconsole.log(\"onAddStream\", event);\n\n\t\tpeers[peer_id].stream = event.stream\n\t\t/*var remote_media = USE_VIDEO ? $(\"<video>\") : $(\"<audio>\");\n\t\tremote_media.attr(\"autoplay\", \"autoplay\");\n\t\tif (MUTE_AUDIO_BY_DEFAULT) {\n\t\t\tremote_media.attr(\"muted\", \"true\");\n\t\t}\n\t\tremote_media.attr(\"controls\", \"\");\n\t\tpeer_media_elements[peer_id] = remote_media;\n\t\t$('body').append(remote_media);\n\t\tattachMediaStream(remote_media[0], event.stream);\n\t}*/\n\n\t/* Add our local stream */\n\t//peer_connection.addStream(local_media_stream);\n\n    //console.log('SELF AUDIO', state.self.tracks.audio);\n\tif(state.self.tracks.audio != undefined) {\n        console.log('SENDING AUDIO TRACK')\n\t\tpeer_connection.addTrack(state.self.tracks.audio);\n\t}\n\n\tif(state.self.tracks.video != undefined) {\n\t\tpeer_connection.addTrack(state.self.tracks.video);\n\t}\n\n\tpeer_connection.ondatachannel = function(event) {\n\t\tvar channel = event.channel;\n\t\tchannel.onopen = function(event) {\n            dispatch('initPeer', peer_id);\n\t\t}\n\t\tchannel.onmessage = function(event) {\n\t\t\tlet message = JSON.parse(event.data);\n\n\t\t\tdispatch('recieveMessage', { message, peer_id });\n\n\t\t\t//dispatch(message.type, message);\n\t\t}\n\t}\n\n\t/* Only one side of the peer connection should create the\n\t* offer, the signaling server picks one to be the offerer. \n\t* The other user will get a 'sessionDescription' event and will\n\t* create an offer, then send back an answer 'sessionDescription' to us\n\t*/\n\tif (config.should_create_offer) {\n\t\tconsole.log(\"Creating RTC offer to \", peer_id);\n\t\tpeer_connection.createOffer(\n\t\t\tfunction (local_description) { \n\t\t\t\tconsole.log(\"Local offer description is: \", local_description);\n\t\t\t\tpeer_connection.setLocalDescription(local_description,\n\t\t\t\t\tfunction() { \n\t\t\t\t\t\tsignaling_socket.emit('relaySessionDescription', \n\t\t\t\t\t\t\t{'peer_id': peer_id, 'session_description': local_description});\n\t\t\t\t\t\tconsole.log(\"Offer setLocalDescription succeeded\"); \n\t\t\t\t\t},\n\t\t\t\t\tfunction() { Alert(\"Offer setLocalDescription failed!\"); }\n\t\t\t\t);\n\t\t\t},\n\t\t\tfunction (error) {\n\t\t\t\tconsole.log(\"Error sending offer: \", error);\n\t\t\t});\n\t}\n}\n\n\nexport const sessionDescription = ({ state }, config) => {\n\tconsole.log('Remote description received: ', config);\n\tvar peer_id = config.peer_id;\n\tvar peer = peers[peer_id].connection;\n\tvar remote_description = config.session_description;\n\tconsole.log(config.session_description);\n\n\tvar desc = new RTCSessionDescription(remote_description);\n\tvar stuff = peer.setRemoteDescription(desc, \n\t\tfunction() {\n\t\t\tconsole.log(\"setRemoteDescription succeeded\");\n\t\t\tif (remote_description.type == \"offer\") {\n\t\t\t\tconsole.log(\"Creating answer\");\n\t\t\t\tpeer.createAnswer(\n\t\t\t\t\tfunction(local_description) {\n\t\t\t\t\t\tconsole.log(\"Answer description is: \", local_description);\n\t\t\t\t\t\tpeer.setLocalDescription(local_description,\n\t\t\t\t\t\t\tfunction() { \n\t\t\t\t\t\t\t\tsignaling_socket.emit('relaySessionDescription', \n\t\t\t\t\t\t\t\t\t{'peer_id': peer_id, 'session_description': local_description});\n\t\t\t\t\t\t\t\tconsole.log(\"Answer setLocalDescription succeeded\");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfunction() { Alert(\"Answer setLocalDescription failed!\"); }\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\tfunction(error) {\n\t\t\t\t\t\tconsole.log(\"Error creating answer: \", error);\n\t\t\t\t\t\tconsole.log(peer);\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tfunction(error) {\n\t\t\tconsole.log(\"setRemoteDescription error: \", error);\n\t\t}\n\t);\n\tconsole.log(\"Description Object: \", desc);\n}","import Vue from \"vue\";\nimport Vuex from \"vuex\";\n\nimport * as getters from './getters'\nimport * as actions from './actions'\nimport mutations from './mutations'\n\nimport * as actionsWebRTC from './actions-webrtc'\n\nimport { createPerson } from '@/utils.js'\n\nimport { randomColor } from 'randomcolor'\n\nVue.use(Vuex)\n\nconst state = {\n    audioContext: new AudioContext(),\n\n\tconnected: false,\n\tgroupID: '',\n\n\tself: createPerson({ color: randomColor() }),\n\n\tpeers: {}\n}\n\nexport default new Vuex.Store({\n\tstate,\n\tgetters,\n\tactions: Object.assign({}, actions, actionsWebRTC),\n\tmutations,\n})","/* eslint-disable no-console */\n\nimport { register } from \"register-service-worker\";\n\nif (process.env.NODE_ENV === \"production\") {\n\tregister(`${process.env.BASE_URL}service-worker.js`, {\n\t\tready() {\n\t\t\tconsole.log(\n\t\t\t\t\"App is being served from cache by a service worker.\\n\" +\n\t\t\t\t\t\"For more details, visit https://goo.gl/AFskqB\"\n\t\t\t);\n\t\t},\n\t\tcached() {\n\t\t\tconsole.log(\"Content has been cached for offline use.\");\n\t\t},\n\t\tupdated() {\n\t\t\tconsole.log(\"New content is available; please refresh.\");\n\t\t},\n\t\toffline() {\n\t\t\tconsole.log(\n\t\t\t\t\"No internet connection found. App is running in offline mode.\"\n\t\t\t);\n\t\t},\n\t\terror(error) {\n\t\t\tconsole.error(\"Error during service worker registration:\", error);\n\t\t}\n\t});\n}\n","import Vue from \"vue\";\nimport App from \"./App.vue\";\nimport store from \"./store\";\nimport \"./registerServiceWorker\";\n\nnew Vue({\n  store,\n  render: h => h(App)\n}).$mount(\"#app\");\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Person.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Person.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}